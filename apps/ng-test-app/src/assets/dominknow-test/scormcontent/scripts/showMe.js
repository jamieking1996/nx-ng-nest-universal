/*! -- File: showMe.js ( Input 0 ) -- */
function showMe(ba){function P(b){Q(b);(!v||1==d.getCurrentSection()&&1==d.getCurrentStep())&&a.introductionContainerPlayButton.text("Play");a.introductionContainerPlayButton.unbind("click").click(function(){d.goToOverallStep(d.getOverallStep());f()})}function ca(b){Q(b);b=a.sectionInfo.data("number-of-sections");d.getCurrentSection()+1>b&&a.introductionContainerPlayButton.text("OK");a.introductionContainerPlayButton.unbind("click").click(function(){var b=a.sectionInfo.data("number-of-sections"),
da=d.getCurrentSection()+1;b>=da&&!a.sectionInfo.find("#section-"+(d.getCurrentSection()+1)).data("section-introduction")?(a.carousel.carousel("next"),b=d.getCurrentSection(),a.sectionInfo.find("#section-"+b),r(),d.toggleActiveStep(),F(),f()):(d.nextStep(),F())})}function Q(b){if(b){R();h=!1;a.introductionContainerPlayButton.prop("disabled",!1);a.introductionText.text(b);a.introductionContainerPlayButton.text("Continue");b=a.introductionText.height();var c=a.introductionTextContainer.height();b>c?
ea():a.introductionTextContainer.removeClass("introduction-text-flex-start");a.introductionOverlay.addClass("justify-content-center");a.introductionOverlay.removeClass("hide-introduction");a.playButton.unbind("click").click(function(){a.introductionContainerPlayButton.trigger("click")})}}function ea(){a.introductionTextContainer.addClass("introduction-text-flex-start");a.introductionTextContainer.scrollTop(0);a.introductionContainerPlayButton.prop("disabled",!0);a.introductionTextContainer.on("scroll",
function(){$(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight&&a.introductionContainerPlayButton.prop("disabled",!1)})}function G(){a.introductionOverlay.addClass("hide-introduction");a.playButton.unbind("click").click(f);a.introductionOverlay.removeClass("justify-content-center")}function w(b){a.inner.animate({top:0,left:0,scale:1},{duration:b,step:H})}function I(){var b=a.sideContainer.find(".panel"),c=a.sideContainer.find(".active");b.animate({scrollTop:c.position().top-b.position().top+
b.scrollTop()});b=a.showMeContainer.find("#nextStep");c=a.showMeContainer.find("#prevStep");a.inner.find(".item:first").hasClass("active")?c.prop("disabled",!0):c.prop("disabled",!1);a.inner.find(".item:last").hasClass("active")?b.prop("disabled",!0):b.prop("disabled",!1)}function x(){a.sideContainer.find(".panel").css("max-height",a.showMeContainer.height()+"px");var b=a.showMeContainer.find("#toggleZoom");1<=y()?b.hide():b.show()}function F(){var b=a.sideContainer.find(".active").children(".label"),
c=b.data("time-start"),b=b.parent().data("section-count"),d=0;for(i=1;i<b;i++){var e=a.sectionInfo.find("#section-"+i).data("section-duration");null!=e&&(d+=parseInt(e))}m=c=parseInt(c,10)+d;z(c);p()}function z(b,c){c?a.playBar.animate({width:b/A*100+"%"},c,"linear"):a.playBar.css("width",b/A*100+"%");p()}function fa(){G();z(m,1E3);p();J=setInterval(function(){m+=1E3;z(m,1E3)},1E3)}function K(){a.playBar.stop();clearInterval(J)}function S(a){var c=(new Date(parseInt(a,10))).toISOString();return 36E5>
a?c.slice(14,-5):c.slice(11,-5)}function p(){a.showMeContainer.find(".player-time").text(S(m)+" / "+S(A))}function ga(a,c){T?fetch(a).then(function(a){a.blob().then(function(a){var b=new FileReader;b.addEventListener("loadend",function(){U(b.result.toString())});b.readAsDataURL(a)})}):U(a)}function U(b){a.mouse.hide();if(null!=b){var c={};c.mp3=b;a.jplayer.jPlayer({ready:function(){ha(c)},supplied:"mp3",solution:"html",size:{height:"0px"}})}}function ha(b){b&&a.jplayer.jPlayer("setMedia",b);a.playHeadButton.click(f);
a.playButton.click(f);a.carousel.click(f);a.playButtonIcon.attr("class","fa fa-fw fa-play fa-2x");a.showMeContainer.find("#mute").click(function(){M?(M=!1,a.jplayer.jPlayer("unmute"),$(this).children("i").attr("class","fa fa-2x fa-fw fa-volume-up")):(M=!0,a.jplayer.jPlayer("mute"),$(this).children("i").attr("class","fa fa-2x fa-fw fa-volume-off"))});d.goToStep(1,1)}function B(){a.jplayer.jPlayer("pause")}function N(b){var c=a.carousel.find(".active"),c=$(c).data("click-count"),c=parseInt(c);C=1<c?
Math.min(800+399*Math.min(c,3),b):Math.min(1200,b);t=setTimeout(function(){t=setTimeout(function(){var a=d.getCurrentSectionInfo(),b=d.getCurrentStep();if(a.data("section-size")==b&&(a=a.data("section-summary"))){ca(a);return}d.nextStep()},Math.min(C,b));V(C)},Math.max(b-C,0))}function r(){return parseInt(a.carousel.find(".active").data("interval"))}function y(){var b=d.getOverallStep?d.getOverallStep()-1:0;return captureProjectUtils.getScale(a,W,b)}function ia(){var b=y();a.mouse.css("transform",
"scale("+b+") translate3d(0, 0, 0)");a.dragOverlay.css("transform","scale("+b+") translate3d("+-a.dragOverlay.width()/2+"px , "+-a.dragOverlay.height()/2+"px , 0)")}function X(){this.carouselItem=a.carousel.find(".active");this.index=this.carouselItem.index()+1;this.totalItems=e.find(".item").length;this.currentItem=e.find(".item").get(this.index);this.minX=this.carouselItem.data("hotspotMinx");this.minY=this.carouselItem.data("hotspotMiny");this.width=this.carouselItem.data("hotspotWidth");this.height=
this.carouselItem.data("hotspotHeight");this.imageElement=a.carousel.find("img")[this.index-1];this.naturalWidth=this.imageElement.naturalWidth;this.naturalHeight=this.imageElement.naturalHeight;this.carouselWidth=this.carouselItem.width();this.carouselHeight=this.carouselItem.height();this.currentEvent=a.carousel.find(".active").data("eventType");this.scale=y();this.offset=0;this.activeElement=a.carousel.find(".active");this.clickCountAttr=$(this.activeElement).data("click-count");this.dataClicks=
parseInt(this.clickCountAttr)}function V(b){var c=new X;if(c.index<c.totalItems){var d=function(){if(c.currentEvent==k.DRAG_START||c.currentEvent==k.DRAG_FINISH&&D==k.DRAG_START||!b)c.currentEvent==k.DRAG_START||c.currentEvent==k.DRAG_FINISH&&D==k.DRAG_START||(a.mouse.find(".mouse-pointer").show(),a.mouse.find(".mouse-pointer-click").hide());else if(2==c.dataClicks|!c.dataClicks)for(var d=c.dataClicks;0<d;)setTimeout(function(){a.mouse.find(".mouse-pointer").show();a.mouse.find(".mouse-pointer-click").hide()},
133),setTimeout(function(){a.mouse.find(".mouse-pointer").hide();a.mouse.find(".mouse-pointer-click").show()},266),setTimeout(function(){a.mouse.find(".mouse-pointer").show();a.mouse.find(".mouse-pointer-click").hide()},399),d--;else if(2<c.dataClicks|!c.dataClicks)for(d=c.dataClicks-1;0<d;)setTimeout(function(){a.mouse.find(".mouse-pointer").show();a.mouse.find(".mouse-pointer-click").hide()},133*d),setTimeout(function(){a.mouse.find(".mouse-pointer").hide();a.mouse.find(".mouse-pointer-click").show()},
266*d),setTimeout(function(){a.mouse.find(".mouse-pointer").show();a.mouse.find(".mouse-pointer-click").hide()},399*d),d--;else setTimeout(function(){a.mouse.find(".mouse-pointer").show();a.mouse.find(".mouse-pointer-click").hide()},399)};c.carouselWidth>c.naturalWidth&&(c.offset=(c.carouselWidth-c.naturalWidth)/2);var e=(parseInt(c.minX)+parseInt(c.width)/2)*c.scale+c.offset,L=(parseInt(c.minY)+parseInt(c.height)/2)*c.scale;0<c.width&&a.mouse.animate({left:e,top:L},parseInt(b)-399*Math.min(c.dataClicks,
3),function(){a.mouse.find(".mouse-pointer").hide();a.mouse.find(".mouse-pointer-click").show();d();D=c.currentEvent});ia();u&&(1<=c.scale?a.inner.animate({top:0,left:0,scale:1},{step:H,duration:b}):Y());width=parseInt(c.width);height=parseInt(c.height);c.currentEvent==k.DRAG_START?(a.dragOverlay.width(c.width),a.dragOverlay.height(c.height),a.dragOverlay.css("top",L).css("left",e)):c.currentEvent==k.DRAG_FINISH&&D==k.DRAG_START&&(a.dragOverlay.show(),a.mouse.find(".mouse-pointer").hide(),a.mouse.find(".mouse-pointer-click").show(),
a.dragOverlay.animate({left:e,top:L},parseInt(b),function(){a.dragOverlay.hide();a.mouse.find(".mouse-pointer").show();a.mouse.find(".mouse-pointer-click").hide()}))}else w(400)}function E(){a.playHeadButton.parent().addClass("hidden")}function f(){if(h)R();else{v||(v=!0,d.goToStep(1,1));a.playButtonIcon.attr("class","fa fa-fw fa-pause fa-2x");E();a.jplayer.jPlayer("play");l&&!l[d.getOverallStep()-1]&&B();if(0!=q)N(q),q=0;else{var b=r();N(b)}fa();a.mouse.show();e.trigger(n.PLAY,d)}h=!h}function R(){a.playButtonIcon.attr("class",
"fa fa-fw fa-play fa-2x");B();clearTimeout(t);a.jplayer.data("jPlayer");var b=m,c=r();q=parseInt(a.carousel.find(".active").attr("data-start-time"),10)+parseInt(c,10)-b;K();e.trigger(n.PAUSE,d)}function ja(a){var c={};window.location.href.replace(location.hash,"").replace(/[?&]+([^=&]+)=?([^&]*)?/gi,function(a,b,d){c[b]=void 0!==d?d:""});return a?c[a]?c[a]:null:decodeURI(c)}var C=0,k={DRAG_START:"START_MOUSE_DRAGGED",DRAG_FINISH:"FINISH_MOUSE_DRAGGED"},n={PLAY:"showMe.play",PAUSE:"showMe.pause",STEP_CHANGED:"showMe.stepChanged",
ENDED:"showMe.ended"},t,D,h=!1,q=0,A,m=0,v=!1,u=!0,W=!1,M=!1,O,Z,l,e,a,aa,J,T=!0,d={};(function(b){O=b.fileName;Z=b.m4aTag;l=b.audioSprite;u=b.panAndZoom;"undefined"!==typeof b.performAudioFetch&&(T=b.performAudioFetch);e=b.container;a={sectionInfo:e.find("#sectionInfo"),carousel:e.find("#softwareSimCarousel"),inner:e.find(".carousel-inner"),sideContainer:e.find("#stepsSideContainer"),showMeContainer:e.find("#showMeContainer"),introductionOverlay:e.find("#introductionOverlay"),introductionTextContainer:e.find("#introductionTextContainer"),
introductionText:e.find("#introductionText"),introductionContainerPlayButton:e.find("#introductionContainerPlayButton"),playHeadButton:e.find(".play-head-button"),playButtonIcon:e.find("#playButton .fa"),playButton:e.find("#playButton"),playBar:e.find(".bar"),mouse:e.find("#mouse"),dragOverlay:e.find("#showMeDragOverlay"),jplayer:e.find("#jplayer")};a.inner.find(".item:first").addClass("active");a.sideContainer.find(".item:first").addClass("active");A=e.data("duration");O?ga(Z,O):(a.playHeadButton.click(f),
a.playButton.click(f),a.carousel.click(f),a.showMeContainer.find("#mute").remove(),a.playButtonIcon.attr("class","fa fa-fw fa-play fa-2x"));p();a.mouse.hide();a.dragOverlay.hide();a.sideContainer.on("click",".step-item",function(){d.goToStep($(this).data("section-count"),$(this).data("step-count"));E()});a.showMeContainer.on("click","#hideSteps",function(){d.toggleSteps()});a.showMeContainer.on("click","#fullScreen",function(){d.toggleFullscreen()});a.showMeContainer.on("click","#nextStep",function(){var b=
d.getCurrentSection(),e=d.getCurrentStep(),g=a.sectionInfo.find("#section-"+b).data("section-size");a.sectionInfo.data("number-of-sections");e+1>g?d.goToStep(b+1,1):d.goToStep(b,e+1);E()});a.showMeContainer.on("click","#prevStep",function(){var b=d.getCurrentSection(),e=d.getCurrentStep();a.sectionInfo.find("#section-"+b).data("section-size");a.sectionInfo.data("number-of-sections");if(1>e-1){for(var e=0,g=!1;!g;b--)e=a.sectionInfo.find("#section-"+(b-1)).data("section-size"),null!=e?g=!0:1==b&&(g=
!0);d.goToStep(b,e)}else d.goToStep(b,e-1);E()});a.showMeContainer.on("click","#toggleZoom",function(){if(u){var b=$(this);a.inner.stop();u=!1;b.find(".fa").attr("class","fa fa-2x fa-fw fa-search-plus");b.prop("disabled",!0);w(300);setTimeout(function(){a.mouse.css("transform","scale(1) translate3d(0, 0, 0)");a.dragOverlay.css("transform","scale(1) translate3d(-50%, -50%, 0)");b.prop("disabled",!1)},300)}else u=!0,Y(),$(this).find(".fa").attr("class","fa fa-2x fa-fw fa-search-minus")});x();aa=setInterval(x,
1E3);1==ja("hideSteps")&&(a.sideContainer.remove(),a.showMeContainer.css("width","100%"));P(a.sectionInfo.find("#section-1").data("section-introduction"));w(0);e.on(n.STEP_CHANGED,function(){a.carousel.find(".item.active[data-event-type\x3d'STOP_CAPTURE']")[0]&&e.trigger(n.ENDED,d)});$(window).on("resize."+e.attr("id"),x)})(ba);d.destroy=function(){$(window).off("resize."+e.attr("id"));$.each(a,function(){$(this).off()});a=a.jplayer=null;clearInterval(aa);clearInterval(J);clearTimeout(t)};d.getOverallStep=
function(){var b=d.getCurrentStep(),c=d.getCurrentSection(),e;for(e=1;e<c;e++){var g=a.sectionInfo.find("#section-"+e).data("section-size");null!=g&&(b+=g)}return b};d.getCurrentStep=function(){return a.carousel.find(".active").data("stepCount")};d.getCurrentSection=function(){return a.carousel.find(".active").data("sectionCount")};d.toggleActiveStep=function(){a.sideContainer.find(".active").attr("class","list-group-item step-item");a.sideContainer.find("[data-step-count\x3d'"+d.getCurrentStep()+
"'][data-section-count\x3d'"+d.getCurrentSection()+"']").attr("class","list-group-item step-item active");currentActive=a.sideContainer.find(".active");a.sideContainer.find(".narration-text").addClass("hidden");currentActive.find(".narration-text").hasClass("hidden")&&currentActive.find(".narration-text").removeClass("hidden");a.sideContainer.find(".markerList").addClass("hidden");currentActive.find(".markerList").hasClass("hidden")&&currentActive.find(".markerList").removeClass("hidden")};d.getCurrentSectionInfo=
function(){var b=d.getCurrentSection();return a.sectionInfo.find("#section-"+b)};d.nextStep=function(){G();a.carousel.carousel("next");var b=d.getCurrentSection(),c=a.sectionInfo.find("#section-"+b),b=r();d.toggleActiveStep();if(1==d.getCurrentStep()&&(c=c.data("section-introduction"))){I();e.trigger(n.STEP_CHANGED,d);p();P(c);return}e.find(".carousel-inner .item:first").hasClass("active")?(a.playButtonIcon.attr("class","fa fa-fw fa-play fa-2x"),h=!1,m=q=0,K(),z(0),a.playHeadButton.parent().removeClass("hidden"),
a.mouse.hide()):N(b);I();e.trigger(n.STEP_CHANGED,d);p();l&&(l[d.getOverallStep()-1]?h&&a.jplayer.jPlayer("play",l[d.getOverallStep()-1][0]/1E3):B())};d.goToOverallStep=function(b){var c=1,e,g=!1;for(e=1;!g;e++){var f=a.sectionInfo.find("#section-"+e).data("section-size");null!=f&&(f>=b?g=!0:(c++,b-=f))}d.goToStep(c,b)};d.goToStep=function(b,c){h=!1;G();a.playButtonIcon.attr("class","fa fa-fw fa-play fa-2x");a.mouse.stop();clearTimeout(t);a.dragOverlay.hide();if(1==b&&1<c||1<b)a.carousel.carousel(d.carouselStepNumber(b,
c-1)),V(0),a.mouse.show(),v=!0;else{var f=e.find("img")[0];a.mouse.animate({left:a.carousel.position().left+Math.max((a.carousel.width()-f.width)/2,0),top:a.carousel.position().top+Math.max((a.carousel.height()-f.height)/2,0)},0);a.mouse.hide()}a.carousel.carousel(d.carouselStepNumber(b,c));b=a.carousel.find(".active").data("startTime");d.toggleActiveStep();q=0;(c=a.jplayer.data("jPlayer"))&&c.status&&(l?(b=d.getOverallStep(),l[b-1]?a.jplayer.jPlayer("pause",l[b-1][0]/1E3):B()):a.jplayer.jPlayer("pause",
b/1E3));I();F();K();e.trigger(n.STEP_CHANGED,d)};d.carouselStepNumber=function(b,c){if(1==b)return c-1;var d=0,e;for(e=1;e<b;e++){var f=a.sectionInfo.find("#section-"+e).data("section-size");null!=f&&(d+=f)}return d+c-1};var H=function(a,c){"scale"===c.prop&&$(this).css("transform","scale("+a+") translate3d(0, 0, 0)")},Y=function(){var b=new X;duration=r()/4;b.carouselWidth>b.naturalWidth&&(b.offset=(b.carouselWidth-b.naturalWidth)/2);var c=(parseInt(b.minX)+parseInt(b.width)/2)*b.scale+b.offset,
d=(parseInt(b.minY)+parseInt(b.height)/2)*b.scale;a.inner.animate({top:-Math.min(Math.max(0,d/b.scale-b.carouselHeight/2),b.naturalHeight-b.carouselHeight),left:-Math.min(Math.max(0,c/b.scale-b.carouselWidth/2),b.naturalWidth-b.carouselWidth),scale:1/b.scale},{step:H,duration:duration})};d.toggleSteps=function(){a.sideContainer.is(":visible")?(a.sideContainer.fadeOut(300),setTimeout(function(){a.showMeContainer.addClass("full");a.showMeContainer.addClass("transition")},300)):(a.showMeContainer.removeClass("full"),
setTimeout(function(){a.sideContainer.fadeIn();a.showMeContainer.removeClass("transition");x()},500))};d.toggleFullscreen=function(){captureProjectUtils.toggleFullscreen(e,a,y(),function(b){if(W=b)a.inner.stop(),w(300)})};d.play=function(){h||f()};d.pause=function(){h&&f()};d.togglePlayback=function(){f()};d.reset=function(){d.goToStep(1,1)};return d};